https://cloud.protopie.io/p/46fc0634e8


MODELS:
    VIDEOS:
        vid = youtube video id
        user:
            access video if:
                they added timestamp
                they used unlock tokens
                have a subscription
        timestamps
        cost = cost in tokens (0 means its free for all)
        hits = number of times video has been accessed
    
    TOKENS:
        user = user that owns the token
        amount = amount of tokens user has
        (N/B: every user has only one token object)

    SUBSCRIPTIONS:
        user = user that owns subscription
        date_created = date subscription was created 
        duration = duration of the subscrition in days
        expired = True if duration >= now else false

    PROMO_CODES:
        secret_code = code for promotion
        purpose = for additional tokens or for subscription
        token_amount = if purpose is tokens, amount of tokens to give
        subscription_duration = if purpose is subscription, duration of subscription to give
        hits =  number of times code can be used
        expires = when code will expire

PAGES:
    home/video playback page:
        navbar:
            if user is logged in:
                display:
                    number of tokens user has
                    profile link 
                    logout
            else:
                display:
                    login/signup
            shop
            home
    
    page for listing youtube partner channels

    user profile page:
        shows remaining Token amount:
            has link to add more tokens (purchase or use code)
        shows subscription duration remaining:
            has link to add or extend subscription (purchase or use code)
        shows number of videos user have stamped
        shows edit user info button
        shows logout button
        shows delete account button
   
    store page:
        has link to purchase more tokens 
        has link to purchase subscription
        has field for entering code
    
    login/signup:
        modal
    
    admin page:
        form to generate promo codes

LOGIC:
    Video:
        if video has no timestamps:
            allow everyone to view video
        else if video cost == 0:
            allow everyone to view video
        else:
            if user is logged in:
                if user has access to video:
                    allow()
                else if user has subscription or user tokens >= video cost:
                    allow()
        if user spend tokens on video:
            add video to their profile 

        if user has subscription:
            list all videos on their profile 
        
        if user add timestamp to video:
            add video to user account
        
        if video hit counter >= 3 and video timestamp is unchanged:
            lock video
    
    Timestamps:
        if user spend tokens on video:
            grant editing rights of timestamps to them but make changes for them alone

    Tokens:
        if video is not timestamped:
            add 3 tokens to the user
        else:
            add 1 token to the user
    

    if user enters valid code in store:
        add code token amount to user token

    if payment is successful:
        add tokens paid for to user tokens
